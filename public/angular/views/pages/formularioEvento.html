<!-- Página con el formulario para agregar un evento -->

<div class="container" style="margin-top: 15%;">
    <!--Script para mostrar mensajes de error en los campos del formulario-->
    <script type="text/ng-template" id="error-messages">
        <span ng-message="required" class="help-block">Este campo es obligatorio.</span>
        <span ng-message="maxlength" class="help-block">La información excede el límite de longitud permitido.</span>
        <span ng-message="minlength" class="help-block">La información es demasiado corta.</span>
        <span ng-message="date" class="help-block">La fecha es incorrecta.</span>
        <span ng-message="url" class="help-block">Se requiere la dirección completa de internet (comúnmente iniciando con "http://").</span>
        <span ng-message="pattern" class="help-block">El formato de este campo es incorrecto.</span>
    </script>

    <!-- Formulario para agregar un nuevo evento a la base de datos -->
    <form name="eventoForm" id="eventoForm" role="form" novalidate>
        <!-- TITULO DEL EVENTO -->
        <div class="form-group" ng-class="{'has-error': eventoForm.titulo.$dirty && eventoForm.titulo.$invalid}">
            <label class="control-label" for="titulo">Título</label>
            <input class="form-control" type="text" name="titulo" id="titulo" ng-model="titulo" ng-maxlength="150" ng-trim required>
            <div ng-messages="eventoForm.titulo.$error" ng-show="eventoForm.titulo.$dirty && eventoForm.titulo.$invalid"><div ng-messages-include="error-messages"></div></div>
        </div>

        <!-- DESCRIPCION DEL EVENTO -->
        <div class="form-group" ng-class="{'has-error': eventoForm.descripcion.$dirty && eventoForm.descripcion.$invalid}">
            <label class="control-label" for="descripcion">Descripción</label>
            <textarea class="form-control" rows="2" name="descripcion" id="descripcion" ng-model="descripcion" ng-maxlength="250" ng-trim></textarea>
            <div ng-messages="eventoForm.descripcion.$error" ng-show="eventoForm.descripcion.$dirty && eventoForm.descripcion.$invalid"><div ng-messages-include="error-messages"></div></div>
        </div>

        <!-- INFORMACIÓN COMPLETA DEL EVENTO (HTML) -->
        <div class="form-group" ng-class="{'has-error': eventoForm.contenidoHTML.$dirty && eventoForm.contenidoHTML.$invalid}">
          <label class="control-label" for="contenidoHTML">Contenido</label>
          <div text-angular ng-model="contenidoHTML" ta-text-editor-class="form-control" ta-html-editor-class="form-control" id="contenidoHTML" required></div>
          <div ng-messages="eventoForm.contenidoHTML.$error" ng-show="eventoForm.contenidoHTML.$dirty && eventoForm.contenidoHTML.$invalid"><div ng-messages-include="error-messages"></div></div>
        </div>

        <!-- TIPO DE EVENTO -->
        <div class="form-group" ng-class="{'has-error': eventoForm.tipo.$dirty && eventoForm.tipo.$invalid}">
            <label class="control-label" for="tipo">Tipo de evento</label>
            <select class="form-control" id="tipo" ng-model="tipo">
                <option value="academico">Académico</option>
                <option value="docencia">Docencia</option>
            </select>
            <div ng-messages="eventoForm.tipo.$error" ng-show="eventoForm.tipo.$dirty && eventoForm.tipo.$invalid"><div ng-messages-include="error-messages"></div></div>
        </div>

        <!-- FECHA -->
        <div class="form-group">
            <label class="control-label" for="fecha">Fecha</label>
            <div class="input-group">
                <input type="text" id="fecha" class="form-control" uib-datepicker-popup ng-model="fecha" is-open="showDate" close-text="Listo" current-text="Hoy" clear-text="Borrar">
                <span class="input-group-btn">
                    <button type="button" class="btn btn-default" ng-click="openDate()"><i class="glyphicon glyphicon-calendar"></i></button>
                </span>
            </div>
        </div>

        <!-- HORARIO -->
        <div class="form-group">
            <label class="control-label" for="horario">Horario</label>
            <uib-timepicker id="horario" ng-model="horario" hour-step="1" minute-step="5"></uib-timepicker>
        </div>

        <!-- REALIZADOR -->
        <div class="form-group">
            <label class="control-label" for="realizador">Realizador(es)</label>
            <input type="text" class="form-control" ng-repeat="realizador in realizadores" ng-model="realizador.nombre">
            <button class="btn btn-default" ng-click="add()" ng-disabled="realizadores[realizadores.length-1].nombre === ''" ng-show="realizadores.length < maxLengthRealizadores"><i class="fa fa-user-plus"></i></button>
        </div>

        <!-- IMAGEN -->
        <div class="form-group">
            <label class="control-label" for="imagenPrincipal">Imagen</label>
            <div class="button" ngf-select="upload(file)" id="imagenPrincipal" style="border: 5px dashed #F5F5F5; width: 170px; text-align: center; padding: 50px 10px;">Click para agregar imagen</div>
        </div>
        
        <!-- <input type="file" ngf-select ng-model="file" name="file" ngf-pattern="'image/*'" ngf-accept="'image/*'" ngf-max-size="2MB"> -->
        <!-- <img height="128" ng-show="file[0] != null" ngf-src="file[0]" ngf-accept="'image/*'" class="thumb"> -->

        <button type="submit" class="btn btn-primary" ng-disabled="eventoForm.$invalid" ng-click="enviar()" ng-show="!eventoID">Agregar evento</button>
        <button type="submit" class="btn btn-primary" ng-disabled="eventoForm.$invalid" ng-click="editar()" ng-show="eventoID">Editar evento</button>
    </form>
</div>