<div class="container my-container">
	<h1>Lista de materiales de archivo</h1>
	<button class="btn btn-default btn-lg" ng-click="new()" ng-show="can('create')"><i class="fa fa-video-camera" aria-hidden="true"></i> Nuevo material de archivo</button>
	<div class="table-responsive">
		<table class="table">
			<tr>
				<th>
					<a href="" ng-click="sortBy('titulo_propio')">Título</a> 
					<i class="fa fa-sort-asc" aria-hidden="true" ng-show="propertyName === 'titulo_propio' && !reverse"></i><i class="fa fa-sort-desc" aria-hidden="true" ng-show="propertyName === 'titulo_propio' && reverse"></i>
				</th>
				<th>
					<a href="" ng-click="sortBy('fecha')">Año</a> 
					<i class="fa fa-sort-asc" aria-hidden="true" ng-show="propertyName === 'fecha' && !reverse"></i><i class="fa fa-sort-desc" aria-hidden="true" ng-show="propertyName === 'fecha' && reverse"></i>
				</th>
				<th>
					<a href="" ng-click="sortBy('createdAt')">Creado en</a> 
					<i class="fa fa-sort-asc" aria-hidden="true" ng-show="propertyName === 'createdAt' && !reverse"></i><i class="fa fa-sort-desc" aria-hidden="true" ng-show="propertyName === 'createdAt' && reverse"></i>
				</th>
				<th ng-show="can('update')"></th> <!-- Icono actualizar -->
				<th ng-show="can('delete')"></th> <!-- Icono borrar -->
			</tr>
			<tr ng-repeat="audiovisual in audiovisuales | orderBy: propertyName: reverse">
				<!-- TITULO -->
				<td>
					<!-- <a href="{{'/audiovisuales/' + audiovisual._id}}">{{audiovisual.titulo_propio}}</a> -->
					{{audiovisual.titulo_propio}}
				</td>
				<!-- FECHA -->
				<td>
					{{audiovisual.fecha | date : 'yyyy'}}
				</td>
				<!-- FECHA CREACION -->
				<td>
					{{audiovisual.createdAt | date : 'dd/MM/yy'}}
				</td>
				<!-- ACTUALIZAR MATERIAL DE ARCHIVO -->
				<td ng-show="can('update')">
					<button class="btn btn-default btn-xs" ng-click="edit(audiovisual._id)"><i class="fa fa-pencil" aria-hidden="true"></i></button>
				</td>
				<!-- BORRAR MATERIAL DE ARCHIVO -->
				<td ng-show="can('delete')">
					<button class="btn btn-danger btn-xs" ng-click="openModal(audiovisual)"><i class="fa fa-trash-o" aria-hidden="true"></i></button>
				</td>
			</tr>
		</table>
	</div>

	<!-- Script para usar en Modal -->
    <script type="text/ng-template" id="modal-template.html">
    	<div class="modal-body text-center" id="modal-body">
    		<p>
    			<i class="fa fa-exclamation-triangle fa-2x" aria-hidden="true"></i>
    			<br>
    			¿Seguro que deseas borrar el material {{audiovisual.titulo_propio}} ?
    		</p>
    		<button class="btn btn-primary" type="button" ng-click="deleteConfirmed(audiovisual._id)">Borrar</button>
    	</div>
    </script>
</div>